# 05
## pdc

### install ad forest
``` ps

Install-WindowsFeature AD-domain-services-IncludeManagement Tools -Verbose

Install-ADDSForest -DomainName xycompany.xy -ForestMode Win2012R2 -DomainMode Win2012R2 -DomainNetbiosName XYCOMPANY -InstallDns:$true
 ```
 
 ### set up dhcp
 ``` ps
Install-WindowsFeature DHCP -IncludeManagement Tools -Verbose
Add-DhcpServerv4Scope -Name xycompany_scope -StartRange 172.16.0.100 -EndRange 172.16.0.150-SubnetMask 255.255.0.0
Set-DhcpServerv4OptionValue -DnsDomain xycompany.xy -DnsServer 172.16.0.254, 172.16.0.253 -Router 172.16.0.1 -Force
Add-DhcpServerInDC -DnsName winserverpdc.xycompany.xy
Get-DhcpServerv4Scope | Select-Object -Property *
 ```
 
 ## bdc
 ### configure ad
 ``` ps
Install-WindowsFeature -Name AD-Domain-Services -IncludeManagement Tools -Verbose
Install-ADDSDomainController -InstallDns -Credential (Get-Credential xycompany\Administrator) -DomainName xycompany.xy -SafeModeAdministrator Password (ConvertTo-SecureString -AsPlainText "#Aa123456789@" -Force)
 ```
 
 ### set dhcp failover
 ``` ps
Install-WindowsFeature DHCP -IncludeManagement Tools -Verbose
Set-DhcpServerv4OptionValue -DnsDomain xycompany.xy -Dns Server 172.16.0.254, 172.16.0.253 -Router 172.16.0.1
Add-DhcpServerInDC -DnsName winserverbdc.xycompany.xy

Add-DhcpServerv4Failover -ComputerName "winserverpdc.xycompany.xy" -Partner Server "winserverbdc.xycompany.xy" -Name "winserverpdc-winserverbdc-hot_standby" -
ServerRole Active -ReservePercent 10-MaxClientLead Time 1:00:00 -StateSwitchInterval 00:45:00 -Scopeld 172.16.0.0 -SharedSecret "#Aa123456789@"


Set-DnsServerForwarder -IPAddress 8.8.8.8
Get-DhcpServerv4Scope | Select-Object -Property
Restart-Service DHCPServer
 ```
